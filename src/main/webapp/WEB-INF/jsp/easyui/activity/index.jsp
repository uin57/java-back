<%@page contentType="text/html" pageEncoding="UTF-8" %><%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><%@ taglib prefix="sjc" uri="http://www.sjc168.com" %><html xmlns="http://www.w3.org/1999/xhtml"><head>    <script type="text/javascript">        $(function () {            var options = {                singleSelect: true,                columns: [[{                    field: 'activityType',                    title: '标识'                }, {                    field: 'title',                    title: '标题'                }, {                    field: 'icon',                    title: '图标路径'                }, {                    field: 'status',                    title: '状态'                }, {                    field: 'activityUser',                    title: '活动对象'                }, {                    field: 'prizeType',                    title: '领奖类型',                    formatter: function (value, row) {                        if (0 == value)                            return '手工';                        else if (1 == value)                            return '半自动';                        else if (2 == value)                            return '全自动';                        else if (3 == value)                            return '程序派发';                        else                            return value;                    }                }, {                    field: 'useRange',                    title: '领奖范围',                    formatter: function (value, row) {                        if (0 == value)                            return '不限';                        else if (1 == value)                            return '网页';                        else if (2 == value)                            return '客户端';                        else if (3 == value)                            return '手机端';                        else                            return value;                    }                }, {                    field: 'amountType',                    title: '奖金类型',                    formatter: function (value, row) {                        if (0 == value)                            return '固定奖金';                        else                            return '按比例';                    }                }, {                    field: 'amount',                    title: '奖金'                }, {                    field: 'maxAmount',                    title: '奖金上限'                }, {                    field: 'beginTime',                    title: '活动时间',                    formatter: function (value, row) {                        return value + " ~ " + row.endTime;                    }                }, {                    field: 'beginPrizeTime',                    title: '有效时间',                    formatter: function (value, row) {                        return value + " ~ " + row.endPrizeTime;                    }                }, {                    field: 'orderId',                    title: '排序'                }, {                    field: 'other',                    title: '操作',                    formatter: function (value, row) {                        var win = "'#win'";                        var url = "'custom/edit'";                        var dat = "'custom/edit?id=" + row.id + "'";                        if (row.activityType == "custom") {                            var txt = '&nbsp;&nbsp;<sjc:auth url="/admin/activity/recharge,/admin/ac,tivity/bet,/admin/activity/sign,/admin/activity/register,/admin/activity/loss"><a href="#" onClick="showDetials(\'' + row.activityType + '\',\'' + row.title + '\','+row.id+')">查看详情</a></sjc:auth>&nbsp;&nbsp;';                            txt += '<sjc:auth url="/admin/activity/user/index"></sjc:auth><a href="#" onClick="del(\'/admin/activity/custom/del?id='+row.id+'\',function(rel){reloadGrid(\'#grid\');})">删除</a>&nbsp;&nbsp;';                            return txt;                        }                        else {                            //暂时注释掉                            var txt = '&nbsp;&nbsp;<sjc:auth url="/admin/activity/recharge,/admin/ac,tivity/bet,/admin/activity/sign,/admin/activity/register,/admin/activity/loss"><a href="#" onClick="showDetials(\'' + row.activityType + '\',\'' + row.title + '\')">查看详情</a></sjc:auth>&nbsp;&nbsp;';                            txt += '<sjc:auth url="/admin/activity/user/index"><a href="#" onClick="showUserList(\'' + row.id + '\')">申请列表</a></sjc:auth>&nbsp;&nbsp;';                            return txt;                        }                    }                }]]            };            createGrid('#grid', options);		    createWin("#win");            //编辑器            KindEditor.create('#editor', {                uploadJson : '<c:url value="/admin/file/update"/>',                afterChange : function() {                    this.sync();                },                afterBlur : function() {                    this.sync();                }            });        });        function showDetials(activityType, title, id) {            addTab(title, "<c:url value="/admin/activity/"/>" + activityType + "/index?id="+id);        }        function showUserList(id) {            addTab('活动申请', '<c:url value="/admin/activity/user/index?activityId="/>' + id);        }        function addActivity() {            addTab('添加活动', '<c:url value="/admin/activity/custom/index?id="/>');        }    </script></head><body><div id="grid"></div><div id="tb">    <div>        <sjc:auth url="/admin/activity/custom/edit"><a href="#" plain="true" icon="icon-add"                                                           class="easyui-linkbutton"                                                           onClick="addActivity()">添加</a></sjc:auth>    </div></div></body></html>